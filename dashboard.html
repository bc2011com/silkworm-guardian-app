<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏≠‡∏≤‡∏£‡∏±‡∏Å‡∏Ç‡∏≤‡∏£‡∏±‡∏á‡πÑ‡∏´‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ ‚Äì Dashboard</title>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Sarabun', Arial, sans-serif;
      background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
      min-height: 100vh;
      font-size: 22px;
      line-height: 1.6;
    }

    .container {
      max-width: 450px;
      margin: 0 auto;
      background: white;
      min-height: 100vh;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
      position: relative;
      padding-bottom: 90px; /* ‡∏Å‡∏±‡∏ô bottom nav ‡∏ö‡∏±‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
    }

    .header {
      background: linear-gradient(120deg, #4caf50, #2e7d32);
      color: white;
      padding: 25px 20px 20px;
      text-align: left;
      position: relative;
    }

    .header h1 {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 10px;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
    }

    .voice-btn {
      position: absolute;
      right: 20px;
      top: 55%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid white;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
    }

    .voice-btn:hover {
      background: rgba(255, 255, 255, 0.35);
    }

    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 18px;
      background: #f1f8e9;
      border-bottom: 1px solid #dcedc8;
    }

    .current-stage {
      font-size: 18px;
      font-weight: 600;
      color: #33691e;
    }

    .weather-info {
      font-size: 16px;
      color: #757575;
    }

    .content {
      padding: 16px 18px 20px;
    }

    .alert-section {
      padding: 12px 14px;
      border-radius: 12px;
      background: #fff8e1;
      border-left: 5px solid #ffa000;
      margin-bottom: 18px;
    }

    .alert-title {
      font-weight: bold;
      font-size: 18px;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .alert-icon {
      font-size: 24px;
    }

    .alert-text {
      font-size: 16px;
      color: #5d4037;
    }

    .today-plan {
      margin: 20px 0;
      padding: 14px 14px 16px;
      border-radius: 12px;
      background: #e3f2fd;
      border-left: 5px solid #1e88e5;
    }

    .today-plan h3 {
      font-size: 18px;
      margin-bottom: 6px;
      color: #1565c0;
    }

    .today-plan ul {
      margin-left: 20px;
      font-size: 16px;
    }

    .today-plan li {
      margin-bottom: 4px;
    }

    .key-metrics {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-top: 10px;
    }

    .metric-card {
      background: #f5f5f5;
      border-radius: 12px;
      padding: 10px 12px;
      text-align: left;
      font-size: 15px;
    }

    .metric-label {
      font-size: 14px;
      color: #757575;
    }

    .metric-value {
      font-size: 18px;
      font-weight: bold;
      color: #2e7d32;
      margin-top: 5px;
    }

    .function-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 25px;
    }

    .function-card {
      background: white;
      border: 3px solid #e0e0e0;
      border-radius: 15px;
      padding: 25px 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .function-card:hover {
      border-color: #4caf50;
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(76, 175, 80, 0.2);
    }

    .function-card.priority-high {
      border-color: #f44336;
      background: #ffebee;
    }

    .function-card.priority-medium {
      border-color: #ff9800;
      background: #fff3e0;
    }

    .function-icon {
      font-size: 40px;
      margin-bottom: 10px;
      display: block;
    }

    .function-title {
      font-size: 18px;
      font-weight: bold;
      color: #333;
      line-height: 1.3;
    }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 450px;
      background: white;
      border-top: 3px solid #4caf50;
      display: flex;
      justify-content: space-around;
      padding: 15px 0;
      box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.1);
      z-index: 100;
    }

    .nav-item {
      text-align: center;
      cursor: pointer;
      padding: 10px;
      border-radius: 10px;
      transition: all 0.3s ease;
      flex: 1;
    }

    .nav-item:hover {
      background: #e8f5e8;
    }

    .nav-item.active {
      background: #4caf50;
      color: white;
    }

    .nav-icon {
      font-size: 30px;
      display: block;
      margin-bottom: 5px;
    }

    .nav-text {
      font-size: 16px;
      font-weight: bold;
    }

    .voice-commands {
      margin-top: 20px;
      padding: 15px 15px 10px;
      background: #f9fbe7;
      border-radius: 12px;
      border: 1px solid #dce775;
      font-size: 14px;
    }

    .voice-commands h3 {
      font-size: 16px;
      margin-bottom: 8px;
    }

    .voice-commands ul {
      padding-left: 20px;
    }

    .voice-commands li {
      margin-bottom: 4px;
    }

    .section-title {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 10px;
      color: #2e7d32;
    }

    .section-description {
      font-size: 16px;
      margin-bottom: 15px;
    }

    .form-section {
      margin-bottom: 20px;
      padding: 15px;
      border-radius: 12px;
      background: #f9f9f9;
      border: 1px solid #eee;
    }

    label {
      display: block;
      font-size: 15px;
      margin-bottom: 5px;
    }

    input[type="date"],
    input[type="number"],
    select,
    textarea {
      width: 100%;
      padding: 8px 10px;
      margin-bottom: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 15px;
      font-family: 'Sarabun', Arial, sans-serif;
    }

    /* ‡∏õ‡∏£‡∏±‡∏ö input type="date" ‡πÉ‡∏´‡πâ‡∏°‡∏µ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô */
    input[type="date"] {
      appearance: none;
      -webkit-appearance: none;
      background: #ffffff
        url("https://cdn-icons-png.flaticon.com/512/747/747310.png")
        no-repeat right 10px center;
      background-size: 22px;
      padding-right: 40px;
      cursor: pointer;
    }

    .action-btn {
      background: #4caf50;
      border: none;
      color: white;
      padding: 12px 18px;
      border-radius: 999px;
      font-size: 16px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 5px;
    }

    .action-btn.secondary {
      background: #9e9e9e;
    }

    .action-btn:hover {
      opacity: 0.95;
    }

    .sub-header {
      background: #2196f3;
      color: white;
      padding: 15px 20px;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .back-btn {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      color: white;
      font-size: 20px;
      cursor: pointer;
    }

    .page-title {
      font-size: 20px;
      font-weight: bold;
    }

    .info-note {
      font-size: 14px;
      color: #555;
      margin-top: 5px;
    }

    .table-wrapper {
      overflow-x: auto;
      margin-top: 10px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    table th,
    table td {
      border: 1px solid #ddd;
      padding: 6px;
      text-align: center;
    }

    table th {
      background: #e0f2f1;
      font-weight: 600;
    }

    .toggle-row {
      margin-top: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 15px;
    }

    .small-tip {
      font-size: 13px;
      color: #757575;
      margin-top: 6px;
    }

    .warning-box {
      background: #ffe0b2;
      border-left: 5px solid #fb8c00;
      padding: 10px 12px;
      border-radius: 10px;
      margin-top: 10px;
      font-size: 14px;
    }

    .info-box {
      background: #e3f2fd;
      border-left: 5px solid #1e88e5;
      padding: 10px 12px;
      border-radius: 10px;
      margin-top: 10px;
      font-size: 14px;
    }

    .record-item {
      padding: 10px;
      border-radius: 10px;
      background: #f5f5f5;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .record-item-title {
      font-weight: bold;
      margin-bottom: 3px;
    }

    .record-item-detail {
      color: #555;
    }

    .chart-container {
      margin: 15px 0;
      padding: 10px;
      background: #fafafa;
      border-radius: 10px;
      border: 1px solid #e0e0e0;
      max-height: 260px;
      overflow: hidden;
    }

    .chart-title {
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 5px;
    }

    #productionChart,
    #survivalChart {
      height: 230px !important;
    }

    .settings-section {
      padding: 15px 18px;
    }

    .settings-section h2 {
      font-size: 20px;
      margin-bottom: 10px;
    }

    .settings-group {
      margin-bottom: 18px;
      padding: 10px 12px;
      border-radius: 10px;
      background: #f9fbe7;
      border: 1px solid #e6ee9c;
    }

    .settings-group h3 {
      font-size: 16px;
      margin-bottom: 5px;
    }

    .settings-group p {
      font-size: 14px;
      color: #555;
    }

    .page {
      display: none;
    }
    .page.active {
      display: block;
    }

    .logout-confirm {
      text-align: center;
      padding: 20px;
    }

    .logout-confirm p {
      margin-bottom: 15px;
    }

    .feeding-log-form {
      margin-top: 10px;
    }

    .nav-legend {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      color: #757575;
      padding: 5px 0;
    }

    .nav-legend span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .color-box {
      width: 12px;
      height: 12px;
      border-radius: 3px;
      display: inline-block;
    }

    .color-home {
      background: #4caf50;
    }
    .color-stats {
      background: #2196f3;
    }
    .color-settings {
      background: #ff9800;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å -->
    <div class="page active" id="homePage">
      <div class="header">
        <h1>üêõ ‡∏≠‡∏≤‡∏£‡∏±‡∏Å‡∏Ç‡∏≤‡∏£‡∏±‡∏á‡πÑ‡∏´‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</h1>
        <div style="font-size: 18px;">‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£‡πÑ‡∏ó‡∏¢</div>
        <button class="voice-btn" onclick="startVoiceCommand()" title="‡∏Å‡∏î‡∏û‡∏π‡∏î‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô">
          üé§
        </button>
      </div>

      <div class="status-bar">
        <div class="current-stage" id="currentStageText">
          üìÖ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á
        </div>
        <div class="weather-info">üå°Ô∏è 28¬∞C üíß 75%</div>
      </div>

      <div class="content">
        <div class="alert-section" id="alertSection">
          <div class="alert-title">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <span>‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</span>
          </div>
          <div class="alert-text" id="alertText">
            ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á "‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏π‡∏• + ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà" ‡πÅ‡∏•‡∏∞ "‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á"
          </div>
        </div>

        <div class="today-plan">
          <h3>üìÖ ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
          <ul id="todayPlanList">
            <li>07:00 ‡∏ô. ‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÉ‡∏ö‡∏´‡∏°‡πà‡∏≠‡∏ô‡∏≠‡πà‡∏≠‡∏ô</li>
            <li>12:00 ‡∏ô. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏†‡∏≤‡∏û‡πÇ‡∏£‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô</li>
            <li>18:00 ‡∏ô. ‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡∏≠‡∏ö‡πÄ‡∏¢‡πá‡∏ô + ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢</li>
          </ul>

          <div class="key-metrics">
            <div class="metric-card">
              <div class="metric-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</div>
              <div class="metric-value" id="metricDayCount">-</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">‡∏ß‡∏±‡∏¢‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</div>
              <div class="metric-value" id="metricStage">-</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏£‡∏≠‡∏î‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</div>
              <div class="metric-value" id="metricSurvival">93%</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</div>
              <div class="metric-value">75‚Äì80%</div>
            </div>
          </div>
        </div>

        <div class="section-title">üß≠ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å</div>
        <div class="section-description">
          ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÉ‡∏´‡∏ç‡πà ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
        </div>

        <div class="function-grid">
          <div class="function-card priority-high" onclick="showPage('feeding')">
            <span class="function-icon">üçÉ</span>
            <div class="function-title">‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£<br />‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</div>
          </div>

          <div class="function-card priority-medium" onclick="showPage('temperature')">
            <span class="function-icon">üå°Ô∏è</span>
            <div class="function-title">‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥<br />‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô</div>
          </div>

          <div class="function-card" onclick="showPage('cleaning')">
            <span class="function-icon">üßπ</span>
            <div class="function-title">‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î<br />‡πÇ‡∏£‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</div>
          </div>

          <div class="function-card" onclick="showPage('waste')">
            <span class="function-icon">üóëÔ∏è</span>
            <div class="function-title">‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏π‡∏•<br />‡∏Ç‡∏¢‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà</div>
          </div>

          <div class="function-card" onclick="showPage('disease')">
            <span class="function-icon">ü¶†</span>
            <div class="function-title">‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á<br />‡πÇ‡∏£‡∏Ñ‡∏´‡∏ô‡∏≠‡∏ô‡πÑ‡∏´‡∏°</div>
          </div>

          <div class="function-card" onclick="showPage('planning')">
            <span class="function-icon">üìã</span>
            <div class="function-title">‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô<br />‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</div>
          </div>

          <div class="function-card" onclick="showPage('recording')">
            <span class="function-icon">üìä</span>
            <div class="function-title">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å<br />‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
          </div>

          <div class="function-card" onclick="showPage('report')">
            <span class="function-icon">üìã</span>
            <div class="function-title">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô<br />‡πÇ‡∏£‡∏Ñ</div>
          </div>
        </div>

        <div class="voice-commands">
          <h3>üé§ ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ</h3>
          <ul>
            <li>"‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏ô‡∏≠‡∏ô‡πÑ‡∏´‡∏°" - ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</li>
            <li>"‡∏ï‡∏£‡∏ß‡∏à‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥" - ‡∏î‡∏π‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô</li>
            <li>"‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û" - ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ</li>
            <li>"‡πÇ‡∏ó‡∏£‡∏•‡∏π‡∏Å‡∏´‡∏•‡∏≤‡∏ô" - ‡πÇ‡∏ó‡∏£‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</li>
            <li>"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" - ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</li>
            <li>"‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥" - ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</li>
            <li>"‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤" - ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- ‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ -->
    <div class="page" id="feedingPage">
      <div class="sub-header">
        <button class="back-btn" onclick="showPage('home')">‚óÄ</button>
        <div class="page-title">üçÉ ‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏ô‡∏≠‡∏ô‡πÑ‡∏´‡∏°</div>
      </div>
      <div style="padding: 20px;">
        <div class="form-section">
          <div class="section-title" id="feedingTitle">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</div>
          <p id="feedingDetail">
            ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡πà‡∏∞
          </p>
          <button class="action-btn" onclick="markFeedingDone()" style="width: 100%; margin-top: 15px;">
            ‚úÖ ‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß
          </button>
        </div>

        <div class="form-section">
          <div class="section-title">üìÜ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</div>
          <p class="info-note">
            ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì "‡∏ß‡∏±‡∏ô‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£" ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏¢‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ï‡∏≤‡∏°‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠ 27 ‡∏ß‡∏±‡∏ô
          </p>
          <label for="start-date">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</label>
          <input type="date" id="start-date" />
          <button class="action-btn" onclick="saveStartDate()">
            üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á
          </button>
          <div class="small-tip">
            * ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡∏±‡∏ô‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏¢‡πÉ‡∏´‡πâ‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
          </div>
        </div>

        <div class="form-section">
          <div class="section-title">üìã ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ 27 ‡∏ß‡∏±‡∏ô (‡∏™‡∏£‡∏∏‡∏õ)</div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>‡∏ß‡∏±‡∏ô‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</th>
                  <th>‡∏ß‡∏±‡∏¢</th>
                  <th>‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</th>
                  <th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
                </tr>
              </thead>
              <tbody id="feedingPlanTableBody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô -->
    <div class="page" id="temperaturePage">
      <div class="sub-header">
        <button class="back-btn" onclick="showPage('home')">‚óÄ</button>
        <div class="page-title">üå°Ô∏è ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô</div>
      </div>
      <div style="padding: 20px;">
        <div class="form-section">
          <div class="section-title">üìç ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô</div>
          <p class="section-description">
            ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡πà‡∏≤‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ß‡∏±‡∏î ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå IoT ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥
          </p>
          <label for="temp-input">‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥ (¬∞C)</label>
          <input type="number" id="temp-input" placeholder="‡πÄ‡∏ä‡πà‡∏ô 28" />

          <label for="humidity-input">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ó‡∏ò‡πå (%)</label>
          <input type="number" id="humidity-input" placeholder="‡πÄ‡∏ä‡πà‡∏ô 75" />

          <button class="action-btn">
            üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤ (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á - ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)
          </button>

          <div class="info-box">
            ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏¢‡πÄ‡∏•‡πá‡∏Å ‡∏Ñ‡∏ß‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 80‚Äì85% ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏Å‡∏•‡πâ‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ñ‡∏≠‡∏ô ‡∏•‡∏î‡∏•‡∏á‡∏°‡∏≤ 70‚Äì75%
          </div>
        </div>
      </div>
    </div>

    <!-- ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î -->
    <div class="page" id="cleaningPage">
      <div class="sub-header">
        <button class="back-btn" onclick="showPage('home')">‚óÄ</button>
        <div class="page-title">üßπ ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÇ‡∏£‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</div>
      </div>
      <div style="padding: 20px;">
        <div class="form-section">
          <div class="section-title">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î</div>
          <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î</label>
          <select>
            <option>‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏π‡∏• + ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏ú‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</option>
            <option>‡∏õ‡∏±‡∏î‡∏Å‡∏ß‡∏≤‡∏î‡∏û‡∏∑‡πâ‡∏ô</option>
            <option>‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà</option>
          </select>

          <label>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
          <textarea rows="3" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏π‡∏•‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏ç‡πà ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏ú‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"></textarea>

          <label>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö</label>
          <input 
            type="file" 
            id="clean-photo"
            accept="image/*"
            capture="environment"
            style="margin-bottom: 12px;"
          />
          <button class="action-btn">
            üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î
          </button>

          <div class="warning-box">
            ‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏ö‡πà‡∏≠‡∏¢ ‡πÜ ‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏•‡∏∞‡∏•‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÄ‡∏Å‡∏¥‡∏î‡πÇ‡∏£‡∏Ñ‡πÉ‡∏ô‡∏´‡∏ô‡∏≠‡∏ô‡πÑ‡∏´‡∏°
          </div>
        </div>
      </div>
    </div>

    <!-- ‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏π‡∏•/‡∏Ç‡∏¢‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà -->
    <div class="page" id="wastePage">
      <div class="sub-header">
        <button class="back-btn" onclick="showPage('home')">‚óÄ</button>
        <div class="page-title">üóëÔ∏è ‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏Ç‡∏¢‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà</div>
      </div>
      <div style="padding: 20px;">
        <div class="form-section">
          <div class="section-title">‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏Ç‡∏¢‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà</div>
          <label>‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏î</label>
          <select>
            <option>‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß</option>
            <option>‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏π‡∏• + ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</option>
            <option>‡∏Ç‡∏¢‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</option>
          </select>

          <label>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
          <textarea rows="3" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏±‡πâ‡∏ô‡πÅ‡∏ú‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏à‡∏≤‡∏Å 3 ‡πÄ‡∏õ‡πá‡∏ô 4 ‡∏ä‡∏±‡πâ‡∏ô"></textarea>

          <button class="action-btn">
            üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
          </button>

          <div class="info-box">
            ‡∏Å‡∏≤‡∏£‡∏Ç‡∏¢‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏´‡∏ô‡∏≠‡∏ô‡πÑ‡∏´‡∏°‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏î‡∏µ ‡∏•‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏µ‡∏¢‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏î
          </div>
        </div>
      </div>
    </div>

    <!-- ‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÇ‡∏£‡∏Ñ -->
    <div class="page" id="diseasePage">
      <div class="sub-header">
        <button class="back-btn" onclick="showPage('home')">‚óÄ</button>
        <div class="page-title">ü¶† ‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÇ‡∏£‡∏Ñ‡∏´‡∏ô‡∏≠‡∏ô‡πÑ‡∏´‡∏°</div>
      </div>
      <div style="padding: 20px;">
        <div class="form-section">
          <div class="section-title">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥</div>
          <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</label>
          <select>
            <option>‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏°‡∏ã‡∏µ‡∏î / ‡πÑ‡∏°‡πà‡∏Å‡∏¥‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option>
            <option>‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏°‡∏°‡∏µ‡∏à‡∏∏‡∏î‡∏î‡∏≥</option>
            <option>‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏°‡∏•‡∏≥‡∏ï‡∏±‡∏ß‡πÄ‡∏õ‡∏∑‡πà‡∏≠‡∏¢</option>
            <option>‡∏≠‡∏∑‡πà‡∏ô ‡πÜ</option>
          </select>

          <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</label>
          <textarea rows="3" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏ö‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏°‡∏ã‡∏µ‡∏î‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 10 ‡∏ï‡∏±‡∏ß ‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 500 ‡∏ï‡∏±‡∏ß"></textarea>

          <button class="action-btn">
            üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏£
          </button>

          <div class="warning-box">
            ‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏µ‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏£‡∏±‡∏Å‡∏Ç‡∏≤‡∏û‡∏∑‡∏ä ‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡πÑ‡∏´‡∏°
          </div>
        </div>
      </div>
    </div>

    <!-- ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á -->
    <div class="page" id="planningPage">
      <div class="sub-header">
        <button class="back-btn" onclick="showPage('home')">‚óÄ</button>
        <div class="page-title">üìã ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÑ‡∏´‡∏°</div>
      </div>
      <div style="padding: 20px;">
        <div class="form-section">
          <div class="section-title">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</div>
          <p class="section-description">
            ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏∏‡πà‡∏ô ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏¢‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
          </p>
          <label for="plan-start-date">‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏£‡∏∏‡πà‡∏ô‡∏ô‡∏µ‡πâ</label>
          <input type="date" id="plan-start-date" />
          <button class="action-btn" onclick="createNewPlan()">
            ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á
          </button>
          <div class="info-box">
            ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ "‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥" (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‚Äì ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)
          </div>
        </div>
      </div>
    </div>

    <!-- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
    <div class="page" id="recordingPage">
      <div class="sub-header">
        <button class="back-btn" onclick="showPage('home')">‚óÄ</button>
        <div class="page-title">üìä ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</div>
      </div>
      <div style="padding: 20px;">
        <div class="form-section">
          <div class="section-title">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏° ‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ</div>
          <p class="section-description">
            ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏´‡∏ô‡∏≠‡∏ô‡πÑ‡∏´‡∏°‡∏ß‡∏±‡∏¢ 3 ‡πÉ‡∏ä‡πâ‡πÉ‡∏ö‡∏´‡∏°‡πà‡∏≠‡∏ô 1.5 ‡∏Å‡∏Å. ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏£‡∏ß‡∏°‡∏´‡∏ô‡∏≠‡∏ô‡πÑ‡∏´‡∏° 2.0 ‡∏Å‡∏Å.
          </p>

          <div class="feeding-log-form">
            <label for="log-day">‡∏ß‡∏±‡∏ô‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏ó‡∏µ‡πà</label>
            <input type="number" id="log-day" placeholder="‡πÄ‡∏ä‡πà‡∏ô 15" />

            <label for="log-stage">‡∏ß‡∏±‡∏¢‡∏ó‡∏µ‡πà</label>
            <select id="log-stage">
              <option value="1">‡∏ß‡∏±‡∏¢ 1</option>
              <option value="2">‡∏ß‡∏±‡∏¢ 2</option>
              <option value="3">‡∏ß‡∏±‡∏¢ 3</option>
              <option value="4">‡∏ß‡∏±‡∏¢ 4</option>
              <option value="5">‡∏ß‡∏±‡∏¢ 5</option>
            </select>

            <label for="log-worm-weight">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏°‡∏£‡∏ß‡∏° (‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°)</label>
            <input
              type="number"
              id="log-worm-weight"
              step="0.1"
              placeholder="‡πÄ‡∏ä‡πà‡∏ô 2.0"
            />

            <label for="log-food-weight">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÉ‡∏ö‡∏´‡∏°‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ (‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°)</label>
            <input
              type="number"
              id="log-food-weight"
              step="0.1"
              placeholder="‡πÄ‡∏ä‡πà‡∏ô 1.5"
            />

            <label for="log-note">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
            <textarea
              id="log-note"
              rows="2"
              placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏°‡∏Å‡∏¥‡∏ô‡∏î‡∏µ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥"
            ></textarea>

            <button class="action-btn" onclick="saveRecord()" style="width: 100%;">
              üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            </button>
          </div>

          <div class="small-tip">
            * ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡πÑ‡∏õ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÑ‡∏î‡πâ
          </div>
        </div>
      </div>
    </div>

    <!-- ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÇ‡∏£‡∏Ñ -->
    <div class="page" id="reportPage">
      <div class="sub-header">
        <button class="back-btn" onclick="showPage('home')">‚óÄ</button>
        <div class="page-title">üìã ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÇ‡∏£‡∏Ñ‡πÅ‡∏•‡∏∞‡∏õ‡∏±‡∏ç‡∏´‡∏≤</div>
      </div>
      <div style="padding: 20px;">
        <div class="form-section">
          <div class="section-title">‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÇ‡∏£‡∏Ñ (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)</div>
          <div class="record-item">
            <div class="record-item-title">‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏°.‡∏Ñ.</div>
            <div class="record-item-detail">
              ‡∏û‡∏ö‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏°‡∏ã‡∏µ‡∏î 15 ‡∏ï‡∏±‡∏ß ‡∏à‡∏≤‡∏Å 1,000 ‡∏ï‡∏±‡∏ß / ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏¢‡πá‡∏ô‡∏à‡∏±‡∏î
            </div>
          </div>

          <div class="record-item">
            <div class="record-item-title">‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏Å.‡∏û.</div>
            <div class="record-item-detail">
              ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÇ‡∏£‡∏Ñ‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á / ‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏°‡πÇ‡∏ï‡∏ä‡πâ‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
            </div>
          </div>

          <div class="info-box">
            ‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö Supabase ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
          </div>
        </div>
      </div>
    </div>

    <!-- ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ -->
    <div class="page" id="statisticsPage">
      <div class="sub-header" style="background: #4caf50;">
        <button class="back-btn" onclick="showPage('home')">‚óÄ</button>
        <div class="page-title">üìà ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</div>
      </div>
      <div style="padding: 15px 16px 80px;">
        <div class="report-main-card">
          <div
            style="
              font-size: 20px;
              font-weight: 700;
              color: #2e7d32;
              margin-bottom: 6px;
            "
          >
            ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á
          </div>
          <div style="font-size: 14px; color: #555; margin-bottom: 6px;">
            ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏£‡∏≤‡∏ü ‚Äì ‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Supabase
            ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á
          </div>

          <div class="chart-container">
            <div class="chart-title">
              ‡∏Å‡∏£‡∏≤‡∏ü‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡∏£‡∏±‡∏á‡πÑ‡∏´‡∏° (‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏°) ‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á
            </div>
            <canvas id="productionChart"></canvas>
          </div>

          <div class="chart-container">
            <div class="chart-title">‡∏Å‡∏£‡∏≤‡∏ü‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏£‡∏≠‡∏î‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡∏≠‡∏ô‡πÑ‡∏´‡∏° (%)</div>
            <canvas id="survivalChart"></canvas>
          </div>

          <div class="form-section">
            <div class="section-title">üìä ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)</div>
            <p class="small-tip">
              ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á
              <strong>feeding_logs</strong> ‡πÉ‡∏ô Supabase ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á
            </p>
            <div class="table-wrapper">
              <table id="feedingLogsTable">
                <thead>
                  <tr>
                    <th>‡∏ß‡∏±‡∏ô‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏ó‡∏µ‡πà</th>
                    <th>‡∏ß‡∏±‡∏¢</th>
                    <th>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏° (‡∏Å‡∏Å.)</th>
                    <th>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÉ‡∏ö‡∏´‡∏°‡πà‡∏≠‡∏ô (‡∏Å‡∏Å.)</th>
                    <th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ -->
    <div class="page" id="settingsPage">
      <div class="sub-header" style="background: #ff9800;">
        <button class="back-btn" onclick="showPage('home')">‚óÄ</button>
        <div class="page-title">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</div>
      </div>
      <div class="settings-section">
        <div class="settings-group">
          <h3>üîî ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h3>
          <label class="toggle-row">
            <input
              type="checkbox"
              id="toggleNotifications"
              onclick="onNotificationToggle(this.checked)"
            />
            ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£
          </label>
          <p id="notifyStatusText" class="small-tip">
            ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á ‡∏´‡∏≤‡∏Å‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
          </p>
        </div>

        <div class="settings-group">
          <h3>üì± ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h3>
          <p>
            ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£‡∏ú‡∏π‡πâ‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÑ‡∏´‡∏° ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ
            ‡πÇ‡∏î‡∏¢‡πÄ‡∏ô‡πâ‡∏ô‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÉ‡∏´‡∏ç‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏°‡∏ô‡∏π‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
          </p>
        </div>

        <div class="settings-group">
          <h3>‚ÑπÔ∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô</h3>
          <p>‡∏£‡∏∏‡πà‡∏ô‡∏ï‡πâ‡∏ô‡πÅ‡∏ö‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢ ‚Äì Dashboard ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏°</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom nav -->
  <div class="bottom-nav">
    <div class="nav-item active" data-page="home" onclick="showPage('home')">
      <span class="nav-icon">üè†</span>
      <div class="nav-text">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</div>
    </div>
    <div
      class="nav-item"
      data-page="statistics"
      onclick="showPage('statistics')"
    >
      <span class="nav-icon">üìà</span>
      <div class="nav-text">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</div>
    </div>
    <div class="nav-item" data-page="settings" onclick="showPage('settings')">
      <span class="nav-icon">‚öôÔ∏è</span>
      <div class="nav-text">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</div>
    </div>
    <div class="nav-item" data-page="logout" onclick="logout()">
      <span class="nav-icon">üì¶</span>
      <div class="nav-text">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</div>
    </div>
  </div>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    /* ------------------ ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ------------------ */
    let productionChartInstance = null;
    let survivalChartInstance = null;
    let notificationEnabled = true;

    /* Supabase REST API */
    const SUPABASE_URL = "https://dpgnqrxanxyxhibkfspx.supabase.co";
    const SUPABASE_ANON_KEY =
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRwZ25xcnhhbnh5eGhpYmtmc3B4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwMjU5NjksImV4cCI6MjA3ODYwMTk2OX0.CTWYu4ZxS_gW6G4r0zGNNj6gVkNE6jSWmcGoXc6GaxI";

    /* ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ 27 ‡∏ß‡∏±‡∏ô */
    const FEEDING_PLAN = [
      { day: 1, stage: 1, times: ["07:00", "11:00", "16:00"], note: "‡πÉ‡∏ö‡∏´‡∏°‡πà‡∏≠‡∏ô‡∏≠‡πà‡∏≠‡∏ô" },
      { day: 2, stage: 1, times: ["07:00", "11:00", "16:00"], note: "‡πÉ‡∏ö‡∏´‡∏°‡πà‡∏≠‡∏ô‡∏≠‡πà‡∏≠‡∏ô" },
      { day: 3, stage: 1, times: ["07:00", "11:00", "16:00"], note: "‡πÉ‡∏ö‡∏´‡∏°‡πà‡∏≠‡∏ô‡∏≠‡πà‡∏≠‡∏ô" },
      { day: 4, stage: 2, times: ["07:00", "11:00", "16:00"], note: "‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏π‡∏• + ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢" },
      { day: 5, stage: 2, times: ["07:00", "11:00", "16:00"], note: "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡πÉ‡∏ö‡∏´‡∏°‡πà‡∏≠‡∏ô" },
      { day: 6, stage: 2, times: ["07:00", "11:00", "16:00"], note: "‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡∏¢‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà" },
      { day: 7, stage: 3, times: ["07:00", "13:00", "18:00"], note: "‡πÉ‡∏ö‡∏´‡∏°‡πà‡∏≠‡∏ô‡∏™‡∏î 1.0 ‡∏Å‡∏Å." },
      { day: 8, stage: 3, times: ["07:00", "13:00", "18:00"], note: "‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏π‡∏• + ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà" },
      { day: 9, stage: 3, times: ["07:00", "13:00", "18:00"], note: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô" },
      { day: 10, stage: 3, times: ["07:00", "13:00", "18:00"], note: "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û" },
      { day: 11, stage: 3, times: ["07:00", "13:00", "18:00"], note: "‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏π‡∏• + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ú‡πà‡∏ô‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á" },
      { day: 12, stage: 4, times: ["08:00", "17:00"], note: "‡πÉ‡∏ö‡∏´‡∏°‡πà‡∏≠‡∏ô‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô" },
      { day: 13, stage: 4, times: ["08:00", "17:00"], note: "‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡∏¢‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà" },
      { day: 14, stage: 4, times: ["08:00", "17:00"], note: "‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏π‡∏• + ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà" },
      { day: 15, stage: 4, times: ["08:00", "17:00"], note: "‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô" },
      { day: 16, stage: 4, times: ["08:00", "17:00"], note: "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û" },
      { day: 17, stage: 5, times: ["09:00", "17:00"], note: "‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏ß‡∏±‡∏¢‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢" },
      { day: 18, stage: 5, times: ["09:00", "17:00"], note: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Å" },
      { day: 19, stage: 5, times: ["09:00", "17:00"], note: "‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ñ‡∏≠‡∏ô" },
      { day: 20, stage: 5, times: ["09:00"], note: "‡∏á‡∏î‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡πÉ‡∏´‡πâ‡∏´‡∏ô‡∏≠‡∏ô‡πÑ‡∏´‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ñ‡∏≠‡∏ô" },
      { day: 21, stage: 5, times: [], note: "‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡∏±‡∏Å‡πÉ‡∏¢" },
      { day: 22, stage: 5, times: [], note: "‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô" },
      { day: 23, stage: 5, times: [], note: "‡∏ï‡∏£‡∏ß‡∏à‡∏î‡∏π‡∏£‡∏±‡∏á‡πÑ‡∏´‡∏°" },
      { day: 24, stage: 5, times: [], note: "‡∏û‡∏±‡∏Å‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏á‡πÑ‡∏´‡∏°‡πÅ‡∏Ç‡πá‡∏á‡∏ï‡∏±‡∏ß" },
      { day: 25, stage: 5, times: [], note: "‡∏ï‡∏±‡∏î‡∏£‡∏±‡∏á‡πÑ‡∏´‡∏° ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß" },
      { day: 26, stage: 5, times: [], note: "‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï" },
      { day: 27, stage: 5, times: [], note: "‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á" }
    ];

    /* utility ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡∏±‡∏ô‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á */
    function getDayNoFromStart(startDateStr, currentDate) {
      if (!startDateStr) return null;
      const startDate = new Date(startDateStr);
      const diffMs = currentDate - startDate;
      const dayNo = Math.floor(diffMs / (1000 * 60 * 60 * 24)) + 1;
      if (dayNo < 1) return null;
      return dayNo;
    }

    function renderFeedingPlanTable() {
      const tbody = document.getElementById("feedingPlanTableBody");
      if (!tbody) return;
      tbody.innerHTML = "";
      FEEDING_PLAN.forEach((plan) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${plan.day}</td>
          <td>‡∏ß‡∏±‡∏¢ ${plan.stage}</td>
          <td>${plan.times.length ? plan.times.join(", ") : "-"}</td>
          <td>${plan.note}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    function updateCurrentStageText() {
      const startStr = localStorage.getItem("silkStartDate");
      const el = document.getElementById("currentStageText");
      const metricDayCount = document.getElementById("metricDayCount");
      const metricStage = document.getElementById("metricStage");

      if (!el) return;

      const today = new Date();
      const dayNo = getDayNoFromStart(startStr, today);

      if (!dayNo) {
        el.textContent =
          "üìÖ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á ‚Äì ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π \"‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£\" ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á";
        if (metricDayCount) metricDayCount.textContent = "-";
        if (metricStage) metricStage.textContent = "-";
        return;
      }

      const plan = FEEDING_PLAN.find((p) => p.day === dayNo);
      const stageText = plan ? `‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏¢‡∏ó‡∏µ‡πà ${plan.stage}` : "‡∏ô‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÅ‡∏ú‡∏ô 27 ‡∏ß‡∏±‡∏ô";
      el.textContent = `üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${dayNo} ${stageText}`;

      if (metricDayCount) metricDayCount.textContent = `${dayNo} ‡∏ß‡∏±‡∏ô`;
      if (metricStage) metricStage.textContent = plan
        ? `‡∏ß‡∏±‡∏¢‡∏ó‡∏µ‡πà ${plan.stage}`
        : "‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÅ‡∏ú‡∏ô";
    }

    function updateFeedingPage() {
      const startStr = localStorage.getItem("silkStartDate");
      const titleEl = document.getElementById("feedingTitle");
      const detailEl = document.getElementById("feedingDetail");

      if (!startStr) {
        if (titleEl) titleEl.textContent = "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á";
        if (detailEl)
          detailEl.textContent =
            "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡πà‡∏∞";
        return;
      }

      const today = new Date();
      const dayNo = getDayNoFromStart(startStr, today);
      const plan = FEEDING_PLAN.find((p) => p.day === dayNo);

      if (!plan) {
        if (titleEl)
          titleEl.textContent = `‡∏ß‡∏±‡∏ô‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏ó‡∏µ‡πà ${dayNo} (‡∏ô‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÅ‡∏ú‡∏ô 27 ‡∏ß‡∏±‡∏ô)`;
        if (detailEl)
          detailEl.textContent =
            "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏∏‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á";
        return;
      }

      if (titleEl) {
        titleEl.textContent = `‚è∞ ‡πÅ‡∏ú‡∏ô‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‚Äì ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏ó‡∏µ‡πà ${dayNo} (‡∏ß‡∏±‡∏¢‡∏ó‡∏µ‡πà ${plan.stage})`;
      }

      if (detailEl) {
        const timeText = plan.times.length
          ? plan.times.join(" ‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤, ") + " ‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤"
          : "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô";
        detailEl.textContent = `‡πÉ‡∏´‡πâ‡πÉ‡∏ö‡∏´‡∏°‡πà‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡∏£‡∏≠‡∏ö‡πÄ‡∏ß‡∏•‡∏≤: ${timeText} | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ${plan.note}`;
      }
    }

    function saveStartDate() {
      const input = document.getElementById("start-date");
      if (!input || !input.value) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡πà‡∏∞");
        return;
      }
      localStorage.setItem("silkStartDate", input.value);
      alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞");
      updateCurrentStageText();
      updateFeedingPage();
    }

    function speakThai(text) {
      if (!("speechSynthesis" in window)) return;
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = "th-TH";
      speechSynthesis.cancel();
      speechSynthesis.speak(utterance);
    }

    async function markFeedingDone() {
      if (notificationEnabled) {
        speakThai(
          "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏£‡∏≠‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡πà‡∏∞"
        );
        alert("üçÉ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏£‡∏≠‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥");
        await logPlannedFeedingToSupabase();
      } else {
        alert("üçÉ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß (‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏¥‡∏î‡πÑ‡∏ß‡πâ)");
      }
    }

    function startVoiceCommand() {
      const startStr = localStorage.getItem("silkStartDate");
      const today = new Date();
      const dayNo = getDayNoFromStart(startStr, today);
      const plan = dayNo ? FEEDING_PLAN.find((p) => p.day === dayNo) : null;

      let msg = "";

      if (!dayNo || !plan) {
        msg =
          "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÅ‡∏ú‡∏ô 27 ‡∏ß‡∏±‡∏ô‡∏Ñ‡πà‡∏∞";
      } else {
        const timeText = plan.times.length
          ? plan.times.join(" ‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤ ‡πÅ‡∏•‡∏∞ ")
          : "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£";
        msg =
          "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏ó‡∏µ‡πà " +
          dayNo +
          " ‡∏ß‡∏±‡∏¢‡∏ó‡∏µ‡πà " +
          plan.stage +
          " ‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô‡∏Ñ‡∏∑‡∏≠ " +
          timeText +
          " ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ " +
          plan.note;
      }

      if (notificationEnabled) {
        msg +=
          " ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡πà‡∏∞ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô‡∏Ñ‡πà‡∏∞";
      } else {
        msg +=
          " ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Ñ‡πà‡∏∞";
      }

      speakThai(msg);
    }

    function getFeedingPlanForDate(startDate, currentDate) {
      const diffMs = currentDate - startDate;
      const dayNo = Math.floor(diffMs / (1000 * 60 * 60 * 24)) + 1;
      const plan = FEEDING_PLAN.find((p) => p.day === dayNo) || null;
      return { dayNo, plan };
    }

    async function logPlannedFeedingToSupabase() {
      const stored = localStorage.getItem("silkStartDate");
      if (!stored) return;

      const startDate = new Date(stored);
      const now = new Date();

      const planResult = getFeedingPlanForDate(startDate, now);
      if (!planResult || !planResult.plan) return;
      const { dayNo, plan } = planResult;

      const currentBatchId = null;
      const timeText = now.toLocaleTimeString("th-TH", {
        hour: "2-digit",
        minute: "2-digit"
      });

      try {
        const response = await fetch(`${SUPABASE_URL}/rest/v1/feeding_logs`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            apikey: SUPABASE_ANON_KEY,
            Authorization: `Bearer ${SUPABASE_ANON_KEY}`,
            Prefer: "return=representation"
          },
          body: JSON.stringify({
            batch_id: currentBatchId,
            day_in_cycle: dayNo,
            age_stage: plan.stage || null,
            worm_weight_kg: null,
            mulberry_weight_kg: null,
            note: `‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤ ${timeText}`
          })
        });

        if (!response.ok) {
          console.error("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å feeding_logs ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:", await response.text());
          return;
        }

        const saved = await response.json();
        console.log("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å feeding_logs ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:", saved);
      } catch (err) {
        console.error("logPlannedFeedingToSupabase error:", err);
      }
    }

    async function saveRecord() {
      const wormWeight = parseFloat(
        document.getElementById("log-worm-weight").value || 0
      );
      const foodWeight = parseFloat(
        document.getElementById("log-food-weight").value || 0
      );
      const note = document.getElementById("log-note").value || "";
      const day = parseInt(document.getElementById("log-day").value || "0", 10);
      const stage = parseInt(
        document.getElementById("log-stage").value || "0",
        10
      );

      console.log("Preparing to save record:", {
        day,
        stage,
        wormWeight,
        foodWeight,
        note
      });

      try {
        const response = await fetch(`${SUPABASE_URL}/rest/v1/feeding_logs`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            apikey: SUPABASE_ANON_KEY,
            Authorization: `Bearer ${SUPABASE_ANON_KEY}`,
            Prefer: "return=representation"
          },
          body: JSON.stringify({
            batch_id: null,
            day_in_cycle: day || null,
            age_stage: stage || null,
            worm_weight_kg: wormWeight || null,
            mulberry_weight_kg: foodWeight || null,
            note: note || ""
          })
        });

        if (!response.ok) {
          console.error("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å feeding_logs ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:", await response.text());
          alert("‚ùå ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà");
          return;
        }

        const saved = await response.json();
        console.log("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å feeding_logs ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:", saved);
        alert("‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
        loadFeedingStats();
      } catch (err) {
        console.error("saveRecord error:", err);
        alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");
      }
    }

    async function loadFeedingStats() {
      const table = document.querySelector("#feedingLogsTable tbody");
      if (!table) return;

      try {
        const response = await fetch(
          `${SUPABASE_URL}/rest/v1/feeding_logs?select=day_in_cycle,age_stage,worm_weight_kg,mulberry_weight_kg,note&order=day_in_cycle.asc`,
          {
            headers: {
              apikey: SUPABASE_ANON_KEY,
              Authorization: `Bearer ${SUPABASE_ANON_KEY}`
            }
          }
        );

        if (!response.ok) {
          console.error("‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:", await response.text());
          return;
        }

        const rows = await response.json();
        renderFeedingLogsTable(rows);
      } catch (err) {
        console.error("loadFeedingStats error:", err);
      }
    }

    function renderFeedingLogsTable(rows) {
      const tbody = document.querySelector("#feedingLogsTable tbody");
      if (!tbody) return;
      tbody.innerHTML = "";

      if (!rows || rows.length === 0) {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td colspan="5">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</td>`;
        tbody.appendChild(tr);
        return;
      }

      const latest = rows.slice(-10).reverse();
      for (const row of latest) {
        const tr = document.createElement("tr");
        const day = row.day_in_cycle ?? "-";
        const stage = row.age_stage ?? "-";
        const worm =
          row.worm_weight_kg != null ? row.worm_weight_kg.toFixed(2) : "-";
        const food =
          row.mulberry_weight_kg != null
            ? row.mulberry_weight_kg.toFixed(2)
            : "-";
        const note = row.note || "";
        tr.innerHTML = `
          <td>${day}</td>
          <td>${stage}</td>
          <td>${worm}</td>
          <td>${food}</td>
          <td>${note}</td>
        `;
        tbody.appendChild(tr);
      }
    }

    function loadNotificationPreference() {
      const saved = localStorage.getItem("notifyEnabled");
      if (saved === null) {
        notificationEnabled = true;
      } else {
        notificationEnabled = saved === "true";
      }

      const checkbox = document.getElementById("toggleNotifications");
      const statusText = document.getElementById("notifyStatusText");

      if (checkbox) checkbox.checked = notificationEnabled;
      if (statusText) {
        statusText.textContent = notificationEnabled
          ? "‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥"
          : "‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà ‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á";
      }
    }

    function onNotificationToggle(checked) {
      notificationEnabled = checked;
      localStorage.setItem("notifyEnabled", checked ? "true" : "false");
      loadNotificationPreference();
    }

    function initCharts() {
      const ctx1 = document.getElementById("productionChart");
      const ctx2 = document.getElementById("survivalChart");

      if (ctx1) {
        const labels = ["‡∏£‡∏∏‡πà‡∏ô 1", "‡∏£‡∏∏‡πà‡∏ô 2", "‡∏£‡∏∏‡πà‡∏ô 3", "‡∏£‡∏∏‡πà‡∏ô 4"];
        const data = [30, 32, 35, 40];

        if (productionChartInstance) productionChartInstance.destroy();

        productionChartInstance = new Chart(ctx1.getContext("2d"), {
          type: "bar",
          data: {
            labels,
            datasets: [
              {
                label: "‡∏Å‡∏¥‡πÇ‡∏•‡∏£‡∏±‡∏á‡πÑ‡∏´‡∏° (‡∏Å‡∏Å.)",
                data,
                backgroundColor: "rgba(76, 175, 80, 0.7)"
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: { y: { beginAtZero: true } }
          }
        });
      }

      if (ctx2) {
        const labels = ["‡∏£‡∏∏‡πà‡∏ô 1", "‡∏£‡∏∏‡πà‡∏ô 2", "‡∏£‡∏∏‡πà‡∏ô 3", "‡∏£‡∏∏‡πà‡∏ô 4"];
        const survivalRates = [92, 94, 90, 95];

        if (survivalChartInstance) survivalChartInstance.destroy();

        survivalChartInstance = new Chart(ctx2.getContext("2d"), {
          type: "line",
          data: {
            labels,
            datasets: [
              {
                label: "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏£‡∏≠‡∏î (%)",
                data: survivalRates,
                tension: 0.3
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: { beginAtZero: true, max: 100 }
            }
          }
        });
      }
    }

    function showPage(pageName) {
      const pages = document.querySelectorAll(".page");
      pages.forEach((p) => p.classList.remove("active"));

      const target = document.getElementById(pageName + "Page");
      if (target) target.classList.add("active");

      const navItems = document.querySelectorAll(".nav-item");
      navItems.forEach((item) => {
        item.classList.toggle("active", item.dataset.page === pageName);
      });

      if (pageName === "statistics") {
        initCharts();
        loadFeedingStats();
      }
      if (pageName === "feeding") {
        updateFeedingPage();
      }
    }

    function logout() {
      window.location.href = "index.html";
    }

    function createNewPlan() {
      const startInput = document.getElementById("plan-start-date");
      if (!startInput || !startInput.value) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡πà‡∏∞");
        return;
      }
      alert("‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‚Äì ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)");
    }

    document.addEventListener("DOMContentLoaded", () => {
      showPage("home");
      initCharts();
      loadNotificationPreference();
      updateCurrentStageText();
      updateFeedingPage();
      renderFeedingPlanTable();
    });
  </script>
</body>
</html>

